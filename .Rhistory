library(zip)
resource <- paste0(getwd(),'/res')
if(!dir.exists(resource)){
dir.create(resource)
download.file('https://dataverse.harvard.edu/api/access/datafile/:persistentId?persistentId=doi:10.7910/DVN/0TJX8Y/PZUURT', destfile=(paste0(temp<- tempfile())),mode="wb")
unzip(zipfile=paste0(temp), exdir = ressource)
}
if(!dir.exists(resource)){
dir.create(resource)
download.file('https://dataverse.harvard.edu/api/access/datafile/:persistentId?persistentId=doi:10.7910/DVN/0TJX8Y/PZUURT', destfile=(paste0(temp<- tempfile())),mode="wb")
unzip(zipfile=paste0(temp), exdir = resource)
}
resource <- paste0(getwd(),'/res')
if(!dir.exists(resource)){
dir.create(resource)
download.file('https://dataverse.harvard.edu/api/access/datafile/:persistentId?persistentId=doi:10.7910/DVN/0TJX8Y/PZUURT', destfile=(paste0(temp<- tempfile())),mode="wb")
unzip(zipfile=paste0(temp), exdir = resource)
}
root_folder <- paste0(resource,'/Converted sessions/')
filelist <- list.files(path = root_folder, pattern = '*.txt', recursive = TRUE)
filenames <- basename(filelist)
ungdc_files <- data.frame(t(sapply(strsplit(filenames, '_'),
function(x) c(x[1], x[2], substr(x[3], 1, 4)))))
View(ungdc_files)
View(ungdc_files)
colnames(ungdc_files) <- c('country', 'number', 'year')
?readChar()
file.info(root_folder)
file.info(root_folder)$mode
file.info(paste0(root_folder))
file.info(paste0(root_folder))$time
file.info(paste0(root_folder))$mtime
file.info(paste0(root_folder))$size
ungdc_files$text
ungdc_files$year
ungdc_files$nummer <- sapply(ungdc_files$year,'15')
?sapply
ungdc_files$nummer <- 14
View(ungdc_files)
?count
?sort
ungdc_files$yearmani <- sapply(ungdc_files$year,function(x) x+1)
ungdc_files$yearmani <- sapply(ungdc_files$year,function(x) (x+1))
sapply(ungdc_files$year,function(x) (x+1))
sapply(ungdc_files$year,function(x) x)
ungdc_files[3]
ungdc_files[3][3]
ungdc_files[3][1]
ungdc_files[3,994]
?data.frame
ungdc_files$text <- sapply(paste0(root_folder, filenames), function(x) readChar(x, file.info(x)$size))
ungdc_files$text <- sapply(paste0(root_folder, filelist), function(x) readChar(x, file.info(x)$size))
View(ungdc_files)
View(ungdc_files)
ungdc_files$text2 <- sapply(ungdc_files, function(x) readChar(paste0(root_folder,'/Session ',x[2],' - ',x[3],'/',x[1],'_',x[2],'_',x[3]), file.info(x)$size))
ungdc_files$text2 <- sapply(t(ungdc_files), function(x) readChar(paste0(root_folder,'/Session ',x[2],' - ',x[3],'/',x[1],'_',x[2],'_',x[3]), file.info(x)$size))
ungdc_files$text2 <- sapply(t(ungdc_files), function(x) readChar(paste0(root_folder,'/Session ',x[2],' - ',x[3],'/',x[1],'_',x[2],'_',x[3]), file.info(x)$size))
ungdc_files$text2 <- sapply(t(ungdc_files), function(x) readChar(paste0(root_folder,'Session ',x$number,' - ',x[3],'/',x[1],'_',x[2],'_',x[3]), file.info(x)$size))
ungdc_files$text2 <- sapply(t(ungdc_files), function(x) readChar(paste0(root_folder,'Session ',x[2],' - ',x[3],'/',x[1],'_',x[2],'_',x[3]), file.info(x)$size))
ungdc_files$text2 <- sapply((ungdc_files), function(x) readChar(paste0(root_folder,'Session ',x[2],' - ',x[3],'/',x[1],'_',x[2],'_',x[3]), file.info(x)$size))
ungdc_files$text2 <- sapply(paste0(root_folder, filelist), function(x) readChar(x, file.info(x)$size))
library(zip)
resource <- paste0(getwd(),'../../res')
library(zip)
resource <- paste0(getwd(),'/res')
if(!dir.exists(resource)){
dir.create(resource)
download.file('https://dataverse.harvard.edu/api/access/datafile/:persistentId?persistentId=doi:10.7910/DVN/0TJX8Y/PZUURT', destfile=(paste0(temp<- tempfile())),mode="wb")
unzip(zipfile=paste0(temp), exdir = resource)
}
root_folder <- paste0(resource,'/Converted sessions/')
filelist <- list.files(path = root_folder, pattern = '*.txt', recursive = TRUE)
filenames <- basename(filelist)
ungdc_files <- data.frame(t(sapply(strsplit(filenames, '_'),
function(x) c(x[1], x[2], substr(x[3], 1, 4)))))
colnames(ungdc_files) <- c('country', 'number', 'year')
ungdc_files$text2 <- sapply(paste0(root_folder, filelist), function(x) readChar(x, file.info(x)$size))
load(url("http://www.politicalterrorscale.org/Data/Files/PTS-2019.RData"))
unlink(temp)
rm(temp)
rm(filelist)
rm(filenames)
rm(urlungdc)
rm(root_folder)
View(ungdc_files)
View(ungdc_files)
View(ungdc_files)
View(ungdc_files)
