military <- read_file(file = "https://raw.githubusercontent.com/openeventdata/tabari_dictionaries/master/IntMilitGroups.090831.actors.txt", header=TRUE, to.data.frame=TRUE, sep=";")
# Get the data directory from readtext
DATA_DIR <- system.file("extdata/", package = "readtext")
library(quanteda)
?tok_compound
?tokens_compound
test <- list (c("armed"), c("army"))
testtok <- tokens(test)
test <- ""armed", "army""
test <- "armed, army, arm"
testtok <- tokens(test)
testtok
testtok2 <- tokens(testtok, remove_punct = TRUE, stem = TRUE)
testtok2 <- tokens(testtok, remove_punct = TRUE, wordstem = TRUE)
?wordstem
?tokens
testtok2 <- tokens(testtok, remove_punct = TRUE)
testtok2
testtok3 <- tokens_wordstem(testtok2)
testtok3
HRlistFariss <- list( c("kill"), c("forc"), c("arm"), c("group"), c("civilian"), c("human"), c("secur"), c("disappear"), c("attack"), c("execut") , c("tortur"), c("member"), c("includ"), c("arrest"), c("prison"), c("polit"), c("amnesti"), c("trial"), c("releas"), c("imprison"), c("sentenc"), c("charg"), c("conscience"), c("polic"), c("offic"), c("illtreat"), c("death"), c("court"), c("alleg"), c("law"), c("service"), c("concern"), c("appeal"), c("servic"), c("committee"),    c("militari"), c("area"), c("continu"), c("section"), c("state"), c("dure"), c("arrest"), c("accord"), c("offici"), c("presid"), c("opposit"), c("howev"), c("parti"), c("hi"), c("author"), c("law"), c("ha"), c("provid"), c("gener"), c("public"), c("constitut"), c("employ"), c("women"), c("right"), c("respect"), c("freedom"), c("prohibit"), c("case"), c("did"), c("ngo"), c("tortur"), c("reportedli"), c("gener"), c("labor"), c("detain"), c("releas"), c("elect"), c("local"), c("presidenti"), c("region"), c("mani"), c("regim"), c("iraq"), c("soviet"), c("nation"), c("ethnic"), c("union"), c("practic"), c("work"))
HRlistGreene <- list(c("committed"), c("victims"), c("populations"), c("scale"), c("armed"), c("army"), c("commanders"), c("conscripted"), c("assassinations"), c("massacres"), c("internally"), c("displaced"), c("food"), c("humanitarian"), c("landmines"), c("money"), c("raped"), c("disappearances"), c("frequently"), c("numerous"), c("widespread"), c("common"), c("regularly"), c("routinely"), c("systematic"), c("extensive"))
HRlistWatanabe <- list(c("human", "rights"), c("violat"), c("race"), c("dignit"), c("proetct"), c("citizen"), c("educat"), c("child"), c("refugee"), c("communit"), c("people"), c("responsibl"), c("health"), c("world"))
HRlistFariss <- list( c("kill"), c("forc"), c("arm"), c("group"), c("civilian"), c("human"), c("secur"), c("disappear"), c("attack"), c("execut") , c("tortur"), c("member"), c("includ"), c("arrest"), c("prison"), c("polit"), c("amnesti"), c("trial"), c("releas"), c("imprison"), c("sentenc"), c("charg"), c("conscience"), c("polic"), c("offic"), c("illtreat"), c("death"), c("court"), c("alleg"), c("law"), c("service"), c("concern"), c("appeal"), c("servic"), c("committee"),    c("militari"), c("area"), c("continu"), c("section"), c("state"), c("dure"), c("arrest"), c("accord"), c("offici"), c("presid"), c("opposit"), c("howev"), c("parti"), c("hi"), c("author"), c("law"), c("ha"), c("provid"), c("gener"), c("public"), c("constitut"), c("employ"), c("women"), c("right"), c("respect"), c("freedom"), c("prohibit"), c("case"), c("did"), c("ngo"), c("tortur"), c("reportedli"), c("gener"), c("labor"), c("detain"), c("releas"), c("elect"), c("local"), c("presidenti"), c("region"), c("mani"), c("regim"), c("iraq"), c("soviet"), c("nation"), c("ethnic"), c("union"), c("practic"), c("work"))
HRlistGreene <- list(c("committed"), c("victims"), c("populations"), c("scale"), c("armed"), c("army"), c("commanders"), c("conscripted"), c("assassinations"), c("massacres"), c("internally"), c("displaced"), c("food"), c("humanitarian"), c("landmines"), c("money"), c("raped"), c("disappearances"), c("frequently"), c("numerous"), c("widespread"), c("common"), c("regularly"), c("routinely"), c("systematic"), c("extensive"))
HRlistWatanabe <- list(c("human", "rights"), c("violat"), c("race"), c("dignit"), c("protect"), c("citizen"), c("educat"), c("child"), c("refugee"), c("communit"), c("people"), c("responsibl"), c("health"), c("world"))
?list
?dictionary
test <- list(c(HRlistFariss, HRlistGreene))
test
HRlist <- do.call(c, list(HRlistFariss, HRlistGreene, HRlistWatanabe))
HRlist
summary(HRlist)
HRdict <- dictionary(HRlist)
HRlistFariss <- list( c("kill"), c("forc"), c("arm"), c("group"), c("civilian"), c("human"), c("secur"), c("disappear"), c("attack"), c("execut") , c("tortur"), c("member"), c("includ"), c("arrest"), c("prison"), c("polit"), c("amnesti"), c("trial"), c("releas"), c("imprison"), c("sentenc"), c("charg"), c("conscience"), c("polic"), c("offic"), c("illtreat"), c("death"), c("court"), c("alleg"), c("law"), c("service"), c("concern"), c("appeal"), c("servic"), c("committee"),    c("militari"), c("area"), c("continu"), c("section"), c("state"), c("dure"), c("arrest"), c("accord"), c("offici"), c("presid"), c("opposit"), c("howev"), c("parti"), c("author"), c("law"), c("provid"), c("gener"), c("public"), c("constitut"), c("employ"), c("women"), c("right"), c("respect"), c("freedom"), c("prohibit"), c("case"), c("ngo"), c("tortur"), c("gener"), c("labor"), c("detain"), c("releas"), c("elect"), c("local"), c("presidenti"), c("region"), c("mani"), c("regim"), c("nation"), c("ethnic"), c("union"), c("practic"), c("work"))
HRlistGreene <- list(c("committed"), c("victims"), c("populations"), c("scale"), c("armed"), c("army"), c("commanders"), c("conscripted"), c("assassinations"), c("massacres"), c("internally", "displaced"), c("food"), c("humanitarian"), c("landmines"), c("money"), c("raped"), c("disappearances"), c("frequently"), c("numerous"), c("widespread"), c("common"), c("regularly"), c("routinely"), c("systematic"), c("extensive"))
HRlistWatanabe <- list(c("human", "rights"), c("violat"), c("race"), c("dignit"), c("protect"), c("citizen"), c("educat"), c("child"), c("refugee"), c("communit"), c("people"), c("responsibl"), c("health"), c("world"))
HRlist <- do.call(c, list(HRlistFariss, HRlistGreene, HRlistWatanabe))
?tokens_compound
dict_HRFariss <- dictionary(list(human_rightsF = c("kill", "forc", "arm", "group", "civilian", "human", "secur", "disappear", "attack", "execut" , "tortur", "member", "includ", "arrest", "prison", "polit", "amnesti", "trial", "releas", "imprison", "sentenc", "charg", "conscience", "polic", "offic", "illtreat", "death", "court", "alleg", "law", "service", "concern", "appeal", "servic", "committee", "militari", "area", "continu", "section", "state", "dure", "arrest", "offici", "presid", "opposit", "howev", "parti", "author", "law", "provid", "gener", "public", "constitut", "employ", "women", "right", "respect", "freedom", "prohibit", "case", "ngo", "tortur", "gener", "labor", "detain", "releas", "elect", "local", "presidenti", "region", "mani", "regim", "nation", "ethnic", "union", "practic", "work")))
dict_HRGreene <- dictionary(list(human_rightsG = c("committed", "victims", "populations", "scale", "armed", "army", "commanders", "conscripted", "assassinations", "massacres", "internally_displaced", "food", "humanitarian", "landmines", "money", "raped", "disappearances", "widespread", "systematic", "extensive")))
dict_HRWatanabe <- dictionary(list(human_rightsW = c("human_rights", "violat", "race", "dignit", "protect", "citizen", "educat", "child", "refugee", "communit", "people", "responsibl", "health", "world")))
?dictionary
HRdict <- dict["dict_HRGreene"], dict["dict_HRWatanabe"], dict["dict_HRFariss"]
?dictionary
###library(quanteda)
Hrlist_compound <- tokens_compound(tok.r, mylist, valuetype = #"fixed", concatenator = "_")
?tokens_compound
###
dict_HRFariss <- dictionary(list(human_rightsF = c("kill", "forc", "arm", "group", "civilian", "human", "secur", "disappear", "attack", "execut" , "tortur", "member", "includ", "arrest", "prison", "polit", "amnesti", "trial", "releas", "imprison", "sentenc", "charg", "conscience", "polic", "offic", "illtreat", "death", "court", "alleg", "law", "service", "concern", "appeal", "servic", "committee", "militari", "area", "continu", "section", "state", "dure", "arrest", "offici", "presid", "opposit", "howev", "parti", "author", "law", "provid", "gener", "public", "constitut", "employ", "women", "right", "respect", "freedom", "prohibit", "case", "ngo", "tortur", "gener", "labor", "detain", "releas", "elect", "local", "presidenti", "region", "mani", "regim", "nation", "ethnic", "union", "practic", "work")))
library(quanteda)
HRlistFariss <- list( c("kill"), c("forc"), c("arm"), c("group"), c("civilian"), c("human"), c("secur"), c("disappear"), c("attack"), c("execut") , c("tortur"), c("member"), c("includ"), c("arrest"), c("prison"), c("polit"), c("amnesti"), c("trial"), c("releas"), c("imprison"), c("sentenc"), c("charg"), c("conscience"), c("polic"), c("offic"), c("illtreat"), c("death"), c("court"), c("alleg"), c("law"), c("service"), c("concern"), c("appeal"), c("servic"), c("committee"),    c("militari"), c("area"), c("continu"), c("section"), c("state"), c("dure"), c("arrest"), c("accord"), c("offici"), c("presid"), c("opposit"), c("howev"), c("parti"), c("author"), c("law"), c("provid"), c("gener"), c("public"), c("constitut"), c("employ"), c("women"), c("right"), c("respect"), c("freedom"), c("prohibit"), c("case"), c("ngo"), c("tortur"), c("gener"), c("labor"), c("detain"), c("releas"), c("elect"), c("local"), c("presidenti"), c("region"), c("mani"), c("regim"), c("nation"), c("ethnic"), c("union"), c("practic"), c("work"))
HRlistGreene <- list(c("committed"), c("victims"), c("populations"), c("scale"), c("armed"), c("army"), c("commanders"), c("conscripted"), c("assassinations"), c("massacres"), c("internally", "displaced"), c("food"), c("humanitarian"), c("landmines"), c("money"), c("raped"), c("disappearances"), c("frequently"), c("numerous"), c("widespread"), c("common"), c("regularly"), c("routinely"), c("systematic"), c("extensive"))
HRlistWatanabe <- list(c("human", "rights"), c("violat"), c("race"), c("dignit"), c("protect"), c("citizen"), c("educat"), c("child"), c("refugee"), c("communit"), c("people"), c("responsibl"), c("health"), c("world"))
HRlist <- do.call(c, list(HRlistFariss, HRlistGreene, HRlistWatanabe))
summary(HRlist)
###library(quanteda)
#Hrlist_compound <- tokens_compound(tok.r, mylist, valuetype = #"fixed", concatenator = "_")
#?tokens_compound
###
dict_HRFariss <- dictionary(list(human_rightsF = c("kill", "forc", "arm", "group", "civilian", "human", "secur", "disappear", "attack", "execut" , "tortur", "member", "includ", "arrest", "prison", "polit", "amnesti", "trial", "releas", "imprison", "sentenc", "charg", "conscience", "polic", "offic", "illtreat", "death", "court", "alleg", "law", "service", "concern", "appeal", "servic", "committee", "militari", "area", "continu", "section", "state", "dure", "arrest", "offici", "presid", "opposit", "howev", "parti", "author", "law", "provid", "gener", "public", "constitut", "employ", "women", "right", "respect", "freedom", "prohibit", "case", "ngo", "tortur", "gener", "labor", "detain", "releas", "elect", "local", "presidenti", "region", "mani", "regim", "nation", "ethnic", "union", "practic", "work")))
dict_HRGreene <- dictionary(list(human_rightsG = c("committed", "victims", "populations", "scale", "armed", "army", "commanders", "conscripted", "assassinations", "massacres", "internally_displaced", "food", "humanitarian", "landmines", "money", "raped", "disappearances", "widespread", "systematic", "extensive")))
dict_HRWatanabe <- dictionary(list(human_rightsW = c("human_rights", "violat", "race", "dignit", "protect", "citizen", "educat", "child", "refugee", "communit", "people", "responsibl", "health", "world")))
HRdict <- dict["dict_HRGreene"], dict["dict_HRWatanabe"], dict["dict_HRFariss"])
HRdict <- c(dict["dict_HRGreene"], dict["dict_HRWatanabe"], dict["dict_HRFariss"])
HRdict <- c(HRdict["dict_HRGreene"], dict["dict_HRWatanabe"], dict["dict_HRFariss"])
library(Amelia)
library(gridExtra)
library(quanteda)
library(tibble)
library(tidyverse)
library(zip)
#Sentiment Dictionary
library(syuzhet)
#HRdict <- c(HRdict["dict_HRGreene"], dict["dict_HRWatanabe"], dict["dict_HRFariss"])
example(dictionary)
HRdict <- c(dict_HRGreene["human_rightsG"], dict_HRFariss["human_rightsF"], dict_HRWatanabe["human_rightsW"])
HRlistFariss <- list( c("kill"), c("forc"), c("arm"), c("group"), c("civilian"), c("human"), c("secur"), c("disappear"), c("attack"), c("execut") , c("tortur"), c("member"), c("includ"), c("arrest"), c("prison"), c("polit"), c("amnesti"), c("trial"), c("releas"), c("imprison"), c("sentenc"), c("charg"), c("conscience"), c("polic"), c("offic"), c("illtreat"), c("death"), c("court"), c("alleg"), c("law"), c("service"), c("concern"), c("appeal"), c("servic"), c("committee"),    c("militari"), c("area"), c("continu"), c("section"), c("state"), c("dure"), c("arrest"), c("accord"), c("offici"), c("presid"), c("opposit"), c("howev"), c("parti"), c("author"), c("law"), c("provid"), c("gener"), c("public"), c("constitut"), c("employ"), c("women"), c("right"), c("respect"), c("freedom"), c("prohibit"), c("case"), c("ngo"), c("tortur"), c("gener"), c("labor"), c("detain"), c("releas"), c("elect"), c("local"), c("presidenti"), c("region"), c("mani"), c("regim"), c("nation"), c("ethnic"), c("union"), c("practic"), c("work"))
HRlistGreene <- list(c("committed"), c("victims"), c("populations"), c("scale"), c("armed"), c("army"), c("commanders"), c("conscripted"), c("assassinations"), c("massacres"), c("internally", "displaced"), c("food"), c("humanitarian"), c("landmines"), c("money"), c("raped"), c("disappearances"), c("frequently"), c("numerous"), c("widespread"), c("common"), c("regularly"), c("routinely"), c("systematic"), c("extensive"))
HRlistWatanabe <- list(c("human", "rights"), c("violat"), c("race"), c("dignit"), c("protect"), c("citizen"), c("educat"), c("child"), c("refugee"), c("communit"), c("people"), c("responsibl"), c("health"), c("world"))
HRlist <- do.call(c, list(HRlistFariss, HRlistGreene, HRlistWatanabe))
dict_HRFariss <- dictionary(list(human_rightsF = c("kill", "forc", "arm", "group", "civilian", "human", "secur", "disappear", "attack", "execut" , "tortur", "member", "includ", "arrest", "prison", "polit", "amnesti", "trial", "releas", "imprison", "sentenc", "charg", "conscience", "polic", "offic", "illtreat", "death", "court", "alleg", "law", "service", "concern", "appeal", "servic", "committee", "militari", "area", "continu", "section", "state", "dure", "arrest", "offici", "presid", "opposit", "howev", "parti", "author", "law", "provid", "gener", "public", "constitut", "employ", "women", "right", "respect", "freedom", "prohibit", "case", "ngo", "tortur", "gener", "labor", "detain", "releas", "elect", "local", "presidenti", "region", "mani", "regim", "nation", "ethnic", "union", "practic", "work")))
dict_HRGreene <- dictionary(list(human_rightsG = c("committed", "victims", "populations", "scale", "armed", "army", "commanders", "conscripted", "assassinations", "massacres", "internally_displaced", "food", "humanitarian", "landmines", "money", "raped", "disappearances", "widespread", "systematic", "extensive")))
dict_HRWatanabe <- dictionary(list(human_rightsW = c("human_rights", "violat", "race", "dignit", "protect", "citizen", "educat", "child", "refugee", "communit", "people", "responsibl", "health", "world")))
HRdict <- c(dict_HRGreene["human_rightsG"], dict_HRFariss["human_rightsF"], dict_HRWatanabe["human_rightsW"])
HRdict
library(Amelia)
library(gridExtra)
library(quanteda)
library(tibble)
library(tidyverse)
library(zip)
#Sentiment Dictionary
library(syuzhet)
tokHRdict <- tokens(HRdict)
library(quanteda)
HRlistFariss <- list( c("kill"), c("forc"), c("arm"), c("group"), c("civilian"), c("human"), c("secur"), c("disappear"), c("attack"), c("execut") , c("tortur"), c("member"), c("includ"), c("arrest"), c("prison"), c("polit"), c("amnesti"), c("trial"), c("releas"), c("imprison"), c("sentenc"), c("charg"), c("conscience"), c("polic"), c("offic"), c("illtreat"), c("death"), c("court"), c("alleg"), c("law"), c("service"), c("concern"), c("appeal"), c("servic"), c("committee"),    c("militari"), c("area"), c("continu"), c("section"), c("state"), c("dure"), c("arrest"), c("accord"), c("offici"), c("presid"), c("opposit"), c("howev"), c("parti"), c("author"), c("law"), c("provid"), c("gener"), c("public"), c("constitut"), c("employ"), c("women"), c("right"), c("respect"), c("freedom"), c("prohibit"), c("case"), c("ngo"), c("tortur"), c("gener"), c("labor"), c("detain"), c("releas"), c("elect"), c("local"), c("presidenti"), c("region"), c("mani"), c("regim"), c("nation"), c("ethnic"), c("union"), c("practic"), c("work"))
HRlistGreene <- list(c("committed"), c("victims"), c("populations"), c("scale"), c("armed"), c("army"), c("commanders"), c("conscripted"), c("assassinations"), c("massacres"), c("internally", "displaced"), c("food"), c("humanitarian"), c("landmines"), c("money"), c("raped"), c("disappearances"), c("frequently"), c("numerous"), c("widespread"), c("common"), c("regularly"), c("routinely"), c("systematic"), c("extensive"))
HRlistWatanabe <- list(c("human", "rights"), c("violat"), c("race"), c("dignit"), c("protect"), c("citizen"), c("educat"), c("child"), c("refugee"), c("communit"), c("people"), c("responsibl"), c("health"), c("world"))
HRlist <- do.call(c, list(HRlistFariss, HRlistGreene, HRlistWatanabe))
summary(HRlist)
###library(quanteda)
#Hrlist_compound <- tokens_compound(tok.r, mylist, valuetype = #"fixed", concatenator = "_")
#?tokens_compound
###
dict_HRFariss <- dictionary(list(human_rightsF = c("kill", "forc", "arm", "group", "civilian", "human", "secur", "disappear", "attack", "execut" , "tortur", "member", "includ", "arrest", "prison", "polit", "amnesti", "trial", "releas", "imprison", "sentenc", "charg", "conscience", "polic", "offic", "illtreat", "death", "court", "alleg", "law", "service", "concern", "appeal", "servic", "committee", "militari", "area", "continu", "section", "state", "dure", "arrest", "offici", "presid", "opposit", "howev", "parti", "author", "law", "provid", "gener", "public", "constitut", "employ", "women", "right", "respect", "freedom", "prohibit", "case", "ngo", "tortur", "gener", "labor", "detain", "releas", "elect", "local", "presidenti", "region", "mani", "regim", "nation", "ethnic", "union", "practic", "work")))
dict_HRGreene <- dictionary(list(human_rightsG = c("committed", "victims", "populations", "scale", "armed", "army", "commanders", "conscripted", "assassinations", "massacres", "internally_displaced", "food", "humanitarian", "landmines", "money", "raped", "disappearances", "widespread", "systematic", "extensive")))
dict_HRWatanabe <- dictionary(list(human_rightsW = c("human_rights", "violat", "race", "dignit", "protect", "citizen", "educat", "child", "refugee", "communit", "people", "responsibl", "health", "world")))
HRdict <- c(dict_HRGreene["human_rightsG"], dict_HRFariss["human_rightsF"], dict_HRWatanabe["human_rightsW"])
HRdict
tokHRdict <- tokens(HRdict)
as.character(HRdict)
as.character(dict_HRGreene)
toks_HRGreene <- tokens(dict_HRGreene)
char_HRGreene <- as.character(dict_HRGreene)
toks_HRGreene <- tokens(char_HRGreene)
toks_HRGreene
stem_HRGreene <-
?tokens
stem_HRGreene <-
?tokens
?tokens
stem_HRGreene <- tokens((toks_HRgreene, remove_punct = TRUE), tokens_wordstem(toks_HRGreene))
remove_HRGreene <- tokens((toks_HRgreene, remove_punct = TRUE) tokens_wordstem(toks_HRGreene))
remove_HRGreene <- tokens(toks_HRgreene, remove_punct = TRUE) tokens_wordstem(toks_HRGreene))
remove_HRGreene <- tokens(toks_HRgreene, remove_punct = TRUE)
char_HRGreene <- as.character(dict_HRGreene)
toks_HRGreene <- tokens(char_HRGreene)
toks_HRGreene
remove_HRGreene <- tokens(toks_HRgreene, remove_punct = TRUE)
remove_HRGreene <- tokens(toks_HRGreene, remove_punct = TRUE)
remove_HRGreene
tokens_wordstem(remove_HRGreene))
tokens_wordstem(remove_HRGreene)
dict_HRGreene <- dictionary(list(human_rightsG = c("commit", "victim", "popul", "scale", "armi", "command", "conscript", "assassin", "massacr", "internally_displac", "internally", "displaced", "food", "humanitarian", "landmin", "money", "rape", "disappear", "widespread", "systemat", "extens")))
char_HRGreene <- as.character(dict_HRGreene)
toks_HRGreene <- tokens(char_HRGreene)
toks_HRGreene
remove_HRGreene <- tokens(toks_HRGreene, remove_punct = TRUE)
remove_HRGreene
tokens_wordstem(remove_HRGreene)
library(Amelia)
library(gridExtra)
library(quanteda)
library(tibble)
library(tidyverse)
library(zip)
#Sentiment Dictionary
library(syuzhet)
dir.create(temp <- tempfile())
urlungdc<-'https://dataverse.harvard.edu/api/access/datafile/:persistentId?persistentId=doi:10.7910/DVN/0TJX8Y/PZUURT'
download.file(urlungdc, paste0(temp, '/PZUURT.zip'),
exdir = temp, mode="wb")
unzip(paste0(temp, '/PZUURT.zip'), exdir = temp)
root_folder <- paste0(temp,'/Converted sessions/')
filelist <-list.files(path = root_folder, pattern = '*.txt', recursive = TRUE)
filenames <- basename(filelist)
ungdc_files <- data.frame(t(sapply(strsplit(filenames, '_'),
function(x) c(x[1], x[2], substr(x[3], 1, 4)))))
colnames(ungdc_files) <- c('country', 'number', 'year')
ungdc_files$text <- sapply(paste0(root_folder, filelist), function(x) readChar(x, file.info(x)$size))
ungdc_files<-as.data.frame(ungdc_files)
ungdc_files$number<-as.integer(as.character(ungdc_files$number))
ungdc_files$year<-as.integer(as.character(ungdc_files$year))
ungdc_files$country<-as.character(ungdc_files$country)
ungdc_files$text<-gsub("\n"," ",ungdc_files$text)
ungdc_files$text<-gsub("\t"," ",ungdc_files$text)
ungdc_files$text<-gsub("\r"," ",ungdc_files$text)
ungdc_files$text<-gsub('"',"",ungdc_files$text)
ungdc_files<-ungdc_files[!ungdc_files$year< 1976, ]
load(url("http://www.politicalterrorscale.org/Data/Files/PTS-2019.RData"))
unlink(temp)
rm(temp)
rm(filelist)
rm(filenames)
rm(urlungdc)
rm(root_folder)
missmap(PTS_2019, main = "Missing values PTS")
missmap(ungdc_files, main = "Missing values UNGDC")
dfungdc <- ungdc_files
#Corpus
c_dfungc<-dfungdc
c_dfungc$text<-dfm(c_dfungc$text)
c1_dfungc<-dfungdc
c1_dfungc$text<-dfm(c1_dfungc$text, remove = stopwords("en"))
c2_dfungc<-dfungdc
c2_dfungc$text<-dfm(c2_dfungc$text, remove = stopwords("en"), remove_punct = TRUE)
c3_dfungc<-dfungdc
c3_dfungc$text<-dfm(c3_dfungc$text, remove = stopwords("en"), remove_punct = TRUE, stem = TRUE)
c4_dfungc<-dfungdc
c4_dfungc$text<-dfm(c4_dfungc$text, remove_punct = TRUE, ngrams = 2)
df_c_dfungc<-topfeatures(c_dfungc$text) %>%
as.data.frame() %>%
`colnames<-`("n") %>%
rownames_to_column("Word") %>%
mutate(Words = fct_reorder(Word, n))
g_df_c_dfungc<- ggplot(df_c_dfungc,aes(x=Words,y=n))+
geom_col(show.legend = FALSE) +
coord_flip() +
ggtitle("Original")+
theme(plot.title = element_text(size = 8))
df_c1_dfungc<-topfeatures(c1_dfungc$text) %>%
as.data.frame() %>%
`colnames<-`("n") %>%
rownames_to_column("Word") %>%
mutate(Words = fct_reorder(Word, n))
g_df_c1_dfungc<- ggplot(df_c1_dfungc,aes(x=Words,y=n))+
geom_col(show.legend = FALSE) +
coord_flip() +
ggtitle("-Stop Words")+
theme(plot.title = element_text(size = 8))
df_c2_dfungc<-topfeatures(c2_dfungc$text) %>%
as.data.frame() %>%
`colnames<-`("n") %>%
rownames_to_column("Word") %>%
mutate(Words = fct_reorder(Word, n))
g_df_c2_dfungc<- ggplot(df_c2_dfungc,aes(x=Words,y=n))+
geom_col(show.legend = FALSE) +
coord_flip() +
ggtitle("-StopWords-Punctuation")+
theme(plot.title = element_text(size = 8))
df_c3_dfungc<-topfeatures(c3_dfungc$text) %>%
as.data.frame() %>%
`colnames<-`("n") %>%
rownames_to_column("Word") %>%
mutate(Words = fct_reorder(Word, n))
g_df_c3_dfungc<- ggplot(df_c3_dfungc,aes(x=Words,y=n))+
geom_col(show.legend = FALSE) +
coord_flip() +
ggtitle("-StopWords-Punc+Stemming")+
theme(plot.title = element_text(size = 8,hjust = 0))
df_c4_dfungc<-topfeatures(c4_dfungc$text) %>%
as.data.frame() %>%
`colnames<-`("n") %>%
rownames_to_column("Word") %>%
mutate(Words = fct_reorder(Word, n))
g_df_c4_dfungc<- ggplot(df_c4_dfungc,aes(x=Words,y=n))+
geom_col(show.legend = FALSE) +
coord_flip() +
ggtitle("-Punctuation +ngrams=2")+
theme(plot.title = element_text(size = 8,hjust = 0))
grid.arrange(g_df_c_dfungc, g_df_c1_dfungc, g_df_c2_dfungc,g_df_c3_dfungc,g_df_c4_dfungc,
nrow = 2,
top="Word Count Review")
library(quanteda)
#create human rights lists from the three sources
HRlistFariss <- list( c("kill"), c("forc"), c("arm"), c("group"), c("civilian"), c("human"), c("secur"), c("disappear"), c("attack"), c("execut") , c("tortur"), c("member"), c("includ"), c("arrest"), c("prison"), c("polit"), c("amnesti"), c("trial"), c("releas"), c("imprison"), c("sentenc"), c("charg"), c("conscience"), c("polic"), c("offic"), c("illtreat"), c("death"), c("court"), c("alleg"), c("law"), c("service"), c("concern"), c("appeal"), c("servic"), c("committee"),    c("militari"), c("area"), c("continu"), c("section"), c("state"), c("dure"), c("arrest"), c("accord"), c("offici"), c("presid"), c("opposit"), c("howev"), c("parti"), c("author"), c("law"), c("provid"), c("gener"), c("public"), c("constitut"), c("employ"), c("women"), c("right"), c("respect"), c("freedom"), c("prohibit"), c("case"), c("ngo"), c("tortur"), c("gener"), c("labor"), c("detain"), c("releas"), c("elect"), c("local"), c("presidenti"), c("region"), c("mani"), c("regim"), c("nation"), c("ethnic"), c("union"), c("practic"), c("work"), c("foreign"), c("children"), c("investig"), c("relig"), c("islam"), c("roma"), c("worker"), c("traffic"), c("feder"), c("parliament"))
HRlistGreene <- list(c("committed"), c("victims"), c("populations"), c("scale"), c("armed"), c("army"), c("commanders"), c("conscripted"), c("assassinations"), c("massacres"), c("internally", "displaced"), c("food"), c("humanitarian"), c("landmines"), c("money"), c("raped"), c("disappearances"), c("frequently"), c("numerous"), c("widespread"), c("common"), c("regularly"), c("routinely"), c("systematic"), c("extensive"))
HRlistWatanabe <- list(c("human", "rights"), c("violat"), c("race"), c("dignit"), c("protect"), c("citizen"), c("educat"), c("child"), c("refugee"), c("communit"), c("people"), c("responsibl"), c("health"), c("world"))
HRlist <- do.call(c, list(HRlistFariss, HRlistGreene, HRlistWatanabe))
summary(HRlist)
###library(quanteda)
#Hrlist_compound <- tokens_compound(tok.r, mylist, valuetype = #"fixed", concatenator = "_")
#?tokens_compound
###
#create dictionaries from the three sources
dict_HRFariss <- dictionary(list(human_rightsF = c("kill", "forc", "arm", "group", "civilian", "human", "secur", "disappear", "attack", "execut" , "tortur", "member", "includ", "arrest", "prison", "polit", "amnesti", "trial", "releas", "imprison", "sentenc", "charg", "conscience", "polic", "offic", "illtreat", "death", "court", "alleg", "law", "service", "concern", "appeal", "servic", "committee", "militari", "area", "continu", "section", "state", "dure", "arrest", "offici", "presid", "opposit", "parti", "author", "law", "provid", "gener", "public", "constitut", "employ", "women", "right", "respect", "freedom", "prohibit", "case", "ngo", "tortur", "gener", "labor", "detain", "releas", "elect", "local", "presidenti", "region", "mani", "regim", "nation", "ethnic", "union", "practic", "work", "foreign", "children", "investig", "relig", "islam", "roma", "worker", "traffic", "feder", "parliament")))
dict_HRGreene <- dictionary(list(human_rightsG = c("commit", "victim", "popul", "scale", "armi", "command", "conscript", "assassin", "massacr", "intern_displac", "food", "humanitarian", "landmin", "money", "rape", "disappear", "widespread", "systemat", "extens")))
#checking the stemmed version of dict_HRGreene
char_HRGreene <- as.character(dict_HRGreene)
toks_HRGreene <- tokens(char_HRGreene)
toks_HRGreene
remove_HRGreene <- tokens(toks_HRGreene, remove_punct = TRUE)
remove_HRGreene
tokens_wordstem(remove_HRGreene)
dict_HRWatanabe <- dictionary(list(human_rightsW = c("human_rights", "violat", "race", "dignit", "protect", "citizen", "educat", "child", "refugee", "communit", "people", "responsibl", "health", "world")))
#combine the dictionaries
HRdict <- c(dict_HRGreene["human_rightsG"], dict_HRFariss["human_rightsF"], dict_HRWatanabe["human_rightsW"])
HRdict
###please check if all words should be used
?tokens_compound
tokUNGDC <- tokens(ungd_files, what = "word",
remove_punct = TRUE,
remove_symbols = TRUE,
remove_numbers = TRUE,
remove_twitter = TRUE,
remove_url = TRUE,
remove_hyphens = FALSE,
verbose = TRUE,
include_docvars = TRUE)
tokUNGDC <- tokens(ungdc_files, what = "word",
remove_punct = TRUE,
remove_symbols = TRUE,
remove_numbers = TRUE,
remove_twitter = TRUE,
remove_url = TRUE,
remove_hyphens = FALSE,
verbose = TRUE,
include_docvars = TRUE)
?corpus
corpUNGDC <- corpus(ungdc_files)
View(corpUNGDC)
HRdict
library(quanteda)
#create human rights lists from the three sources
HRlistFariss <- list( c("kill"), c("forc"), c("arm"), c("group"), c("civilian"), c("human"), c("secur"), c("disappear"), c("attack"), c("execut") , c("tortur"), c("member"), c("includ"), c("arrest"), c("prison"), c("polit"), c("amnesti"), c("trial"), c("releas"), c("imprison"), c("sentenc"), c("charg"), c("conscience"), c("polic"), c("offic"), c("illtreat"), c("death"), c("court"), c("alleg"), c("law"), c("service"), c("concern"), c("appeal"), c("servic"), c("committee"),    c("militari"), c("area"), c("continu"), c("section"), c("state"), c("dure"), c("arrest"), c("accord"), c("offici"), c("presid"), c("opposit"), c("howev"), c("parti"), c("author"), c("law"), c("provid"), c("gener"), c("public"), c("constitut"), c("employ"), c("women"), c("right"), c("respect"), c("freedom"), c("prohibit"), c("case"), c("ngo"), c("tortur"), c("gener"), c("labor"), c("detain"), c("releas"), c("elect"), c("local"), c("presidenti"), c("region"), c("mani"), c("regim"), c("nation"), c("ethnic"), c("union"), c("practic"), c("work"), c("foreign"), c("children"), c("investig"), c("relig"), c("islam"), c("roma"), c("worker"), c("traffic"), c("feder"), c("parliament"))
HRlistGreene <- list(c("committed"), c("victims"), c("populations"), c("scale"), c("armed"), c("army"), c("commanders"), c("conscripted"), c("assassinations"), c("massacres"), c("internally", "displaced"), c("food"), c("humanitarian"), c("landmines"), c("money"), c("raped"), c("disappearances"), c("frequently"), c("numerous"), c("widespread"), c("common"), c("regularly"), c("routinely"), c("systematic"), c("extensive"))
HRlistWatanabe <- list(c("human", "rights"), c("violat"), c("race"), c("dignit"), c("protect"), c("citizen"), c("educat"), c("child"), c("refugee"), c("communit"), c("people"), c("responsibl"), c("health"), c("world"))
HRlist <- do.call(c, list(HRlistFariss, HRlistGreene, HRlistWatanabe))
summary(HRlist)
#create dictionaries from the three sources
dict_HRFariss <- dictionary(list(human_rightsF = c("kill", "forc", "arm", "group", "civilian", "human", "secur", "disappear", "attack", "execut" , "tortur", "member", "includ", "arrest", "prison", "polit", "amnesti", "trial", "releas", "imprison", "sentenc", "charg", "conscience", "polic", "offic", "illtreat", "death", "court", "alleg", "law", "service", "concern", "appeal", "servic", "committee", "militari", "area", "continu", "section", "state", "dure", "arrest", "offici", "presid", "opposit", "parti", "author", "law", "provid", "gener", "public", "constitut", "employ", "women", "right", "respect", "freedom", "prohibit", "case", "ngo", "tortur", "gener", "labor", "detain", "releas", "elect", "local", "presidenti", "region", "mani", "regim", "nation", "ethnic", "union", "practic", "work", "foreign", "children", "investig", "relig", "islam", "roma", "worker", "traffic", "feder", "parliament")))
dict_HRGreene <- dictionary(list(human_rightsG = c("commit", "victim", "popul", "scale", "armi", "command", "conscript", "assassin", "massacr", "intern_displac", "food", "humanitarian", "landmin", "money", "rape", "disappear", "widespread", "systemat", "extens")))
#checking the stemmed version of dict_HRGreene
char_HRGreene <- as.character(dict_HRGreene)
toks_HRGreene <- tokens(char_HRGreene)
toks_HRGreene
remove_HRGreene <- tokens(toks_HRGreene, remove_punct = TRUE)
remove_HRGreene
tokens_wordstem(remove_HRGreene)
dict_HRWatanabe <- dictionary(list(human_rightsW = c("human_rights", "violat", "race", "dignit", "protect", "citizen", "educat", "child", "refugee", "communit", "people", "responsibl", "health", "world")))
#combine the dictionaries
HRdict <- c(dict_HRGreene["human_rightsG"], dict_HRFariss["human_rightsF"], dict_HRWatanabe["human_rightsW"])
HRdict
###please check if all words should be used
?dictionary
fileagents <- tempfile()
?download.file
download.file("https://github.com/juribep5/tadaproject/blob/master/agents.csv")
download.file("https://github.com/juribep5/tadaproject/blob/master/agents.csv", fileagents)
tempagents <- tempfile()
tempagents <- download.file("https://github.com/juribep5/tadaproject/blob/master/agents.csv", tempagents)
tempagents
tempagents <- download.file("https://github.com/juribep5/tadaproject/blob/master/agents.csv", tempagents, mode = "wb")
str(tempagents)
?load
?read.csv
fileagents <- read.csv("http://some.where.net/data/foo.csv", header = TRUE, sep = ",")
fileagents <- read.csv("https://raw.githubusercontent.com/juribep5/tadaproject/master/agents.csv", header = TRUE, sep = ",")
fileagents
str(fileagents)
drop <- c("note")
fileagents
fileagents
str(fileagents)
?rename
rename(fileagents, ï..text = agent, code   = code, note   = note)
rename(fileagents, agent = ï..text, code=   code, note=   note)
fileagents
str(fileagents)
rename(fileagents, agent = ï..text)
str(fileagents)
fileagents %>%
rename(
agents = ï..text
)
str(fileagents)
fileagents$ï..text
rename(fileagents$ï..text = fileagents$agents)
fileagents = subset(mydata, select = -c(note))
fileagents = subset(fileagents, select = -c(note))
fileagents
mode(fileagents)
fileagents
dictagents = dictionary(list(fileagents, tolower = TRUE))
dictagents = dictionary(fileagents, tolower = TRUE)
mode(fileagents)
dictagents = dictionary(list(agents = fileagents, tolower = TRUE)
dictagents = dictionary(list(agents = fileagents, tolower = TRUE))
dictagents <- dictionary(list(agents = fileagents, tolower = TRUE))
colnames(fileagents) <- c("agent", "topic")
fileagents
mode(fileagents)
dictagents <- dictionary(list(agents = fileagents, tolower = TRUE))
charagents <- as.list(fileagents)
listagents <- as.list(fileagents)
listagents
str(listagents)
View(listagents)
View(listagents)
gsub("[[:punct:]]", "", listagents)
gsub("[[:punct:]]", "", listagents$topic)
str(listagents)
fileagents
gsub("[[:punct:]]", "", fileagents$topic)
fileagent2 <- gsub("[[:punct:]]", "", fileagents$topic)
head(fileagent2)
fileagent2
fileagent2 <- gsub("[[:punct:]]", "", fileagents)
fileagent2
df(fileagent2)
fileagent$topic
fileagents$topic
?gsub
fileagents2$topic <- gsub("[[:punct:]]", "", fileagents$topic")
?gsub
?rename
?gsub""
fileagents2$topic <- gsub("[[:punct:]]", "", fileagents$topic)
fileagents2 <- gsub("[[:punct:]]", "", fileagents$topic)
fileagents2
fileagents1 <- gsub("[[:punct:]]", "", fileagents$agent)
fileagents1
fileagents
gsub("[[:punct:]]", "", fileagents$topic)
fileagents
str(fileagents)
fileagents2 <- gsub("[[:punct:]]", "", fileagents$topic)
str(fileagents2)
dictagents <- dictionary(list(agents = fileagents, tolower = TRUE))
vieW(fileagents)
fileagents
summary(fileagents)
summary(fileagents$topic)
summary(fileagents)
str(fileagents)
dictagents <- dictionary(list(agents = fileagents, tolower = TRUE))
??list
?list
as.list(fileagents$agent)
as.list(fileagent$topic)
as.list(fileagents$topic)
dictagents <- dictionary(list(agents = fileagents, tolower = TRUE))
?dictionary
dictagents <- dictionary(list(agents = fileagents, format = "wordstat", tolower = TRUE))
dictagents <- dictionary(list(agents = fileagents, format = "LIWC", tolower = TRUE))
fileagents
str(fileagents)
encoding(fileagents)
dictagents <- as.dictionary(list(agents = fileagents, tolower = TRUE))
install.packages("rworldmap")
library(zip)
#Loading packages and data
library(readtext)
library(quanteda)
library(dplyr)
library(tidyr)
library(stringr)
library(ggplot2)
library(rworldmap)
library(RColorBrewer)
library(haven)
library(readxl)
#Upload UNGDC data
ungd_files <- readtext("Converted sessions/*",
docvarsfrom = "filenames",
dvsep="_",
docvarnames = c("Country", "Session", "Year"))
#Upload UNGDC data
dir.create(temp <- tempfile())
urlungdc<-'https://dataverse.harvard.edu/api/access/datafile/:persistentId?persistentId=doi:10.7910/DVN/0TJX8Y/PZUURT'
download.file(urlungdc, paste0(temp, '/PZUURT.zip'), mode="wb",
exdir = temp)
unzip(paste0(temp, '/PZUURT.zip'), exdir = temp)
ungd_files <- readtext("temp",
docvarsfrom = "filenames",
dvsep="_",
docvarnames = c("Country", "Session", "Year"))
temp
ungd_files <- readtext(paste0(temp, '/Converted sessions',
docvarsfrom = "filenames",
dvsep="_",
docvarnames = c("Country", "Session", "Year")))
ungd_files <- readtext(paste0(temp, '/Converted sessions/*',
docvarsfrom = "filenames",
dvsep="_",
docvarnames = c("Country", "Session", "Year")))
#Upload UNGDC data
dir.create(temp <- tempfile())
urlungdc<-'https://dataverse.harvard.edu/api/access/datafile/:persistentId?persistentId=doi:10.7910/DVN/0TJX8Y/PZUURT'
download.file(urlungdc, paste0(temp, '/PZUURT.zip'), mode="wb",
exdir = temp)
unzip(paste0(temp, '/PZUURT.zip'), exdir = temp)
ungd_files <- readtext(paste0(temp, '/Converted sessions/*',
docvarsfrom = "filenames",
dvsep="_",
docvarnames = c("Country", "Session", "Year")))
listungdc <- list.files(temp, '/Converted sessions/*')
head(listungdc)
?system.file
unzip(system.file("extdata", "PZUURT.zip", package = "readtext"), exdir = temp)
unzip(system.file("PZUURT.zip", package = "readtext"), exdir = temp)
unzip(system.file("/PZUURT.zip", package = "readtext"), exdir = temp)
unzip(system.file('/PZUURT.zip', package = "readtext"), exdir = temp)
unzip(system.file(temp, '/PZUURT.zip', package = "readtext"), exdir = temp)
unzip(paste0(temp, '/PZUURT.zip'), exdir = temp)
ungd_files <- readtext(paste0("/Converted sessions/*",
docvarsfrom = "filenames",
dvsep="_",
docvarnames = c("Country", "Session", "Year")))
ungd_files <- readtext("/Converted sessions/*",
docvarsfrom = "filenames",
dvsep="_",
docvarnames = c("Country", "Session", "Year")))
ungd_files <- readtext("/Converted sessions/*",
docvarsfrom = "filenames",
dvsep="_",
docvarnames = c("Country", "Session", "Year"))
ungd_files <- readtext(paste0(temp, "/Converted sessions/*"),
encoding = encoding,
docvarsfrom = "filenames",
dvsep="_",
docvarnames = c("Country", "Session", "Year"))
ungd_files <- readtext(paste0(temp, "/Converted sessions/*"),
docvarsfrom = "filenames",
dvsep="_",
docvarnames = c("Country", "Session", "Year"))
head(ungd_files)
ungd_files$doc_id <- str_replace(ungd_files$doc_id , ".txt", "") %>%
str_replace(. , "_\\d{2}", "")
ungd_corpus <- corpus(ungd_files, text_field = "text")
ungdc.1990 <- corpus_subset(ungd_corpus, Year>1990)
#Tokenization and basic pre-processing
tok <- tokens(ungd_corpus, what = "word",
remove_punct = TRUE,
remove_symbols = TRUE,
remove_numbers = TRUE,
remove_twitter = TRUE,
remove_url = TRUE,
remove_hyphens = FALSE,
verbose = TRUE,
include_docvars = TRUE)
