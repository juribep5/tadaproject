afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
group_by(MergeCountry, Year) %>%
mutate(method = "AFINN")
afinn
USA_sentiment_plot <-
bing %>%
filter(c(sentiment == "negative")) %>%
inner_join(get_sentiments("bing")) %>%
group_by(Year) %>%
count(word, sort = TRUE)
USA_sentiment_plot
ggplot(USA_sentiment_plot, aes(x=Year, y=n))+
geom_line(color="red")+
theme_minimal()+
ylab("Frequency of Negative Words in USA speeches")+
xlab("Year")
USA_sentiment_plot(group_by(Year))
USA_sentiment_plot1 <- USA_sentiment_plot %>%
group_by(Year)
USA_sentiment_plot1
sentiment_plot <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
filter(sentiment == "negative") %>%
group_by(MergeCountry, Year)
ggplot(sentiment_plot, aes(x=Year, y=n))+
geom_line(color="red")+
theme_minimal()+
ylab("Frequency of Negative Words in UN speeches")+
xlab("Year")
View(sentiment_plot)
sentiment_plot <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
filter(sentiment == "negative") %>%
count(Year, sentiment)
ggplot(sentiment_plot, aes(x=Year, y=n))+
geom_line(color="red")+
theme_minimal()+
ylab("Frequency of Negative Words in UN speeches")+
xlab("Year")
sentiment_plot <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
filter(sentiment == "positive") %>%
count(Year, sentiment)
#time-series negative sentiment - bing
sentiment_plot <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
filter(sentiment == "negative") %>%
count(Year, sentiment)
sentiment_plotp <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
filter(sentiment == "positive") %>%
count(Year, sentiment)
ggplot(sentiment_plotp, aes(x=Year, y=n))+
geom_line(color="blue")+
theme_minimal()+
ylab("Frequency of Negative Words in UN speeches")+
xlab("Year")
ggplot(sentiment_plotp, aes(x=Year, y=n))+
geom_line(color="blue")+
theme_minimal()+
ylab("Frequency of Positive Words in UN speeches")+
xlab("Year")
View(sentiment_plotp)
View(sentiment_plotp)
ggplot(sentiment_plotp, aes(x=as.numeric(Year), y=n))+
geom_line(color="blue")+
theme_minimal()+
ylab("Frequency of Positive Words in UN speeches")+
xlab("Year")
?tabulate
mode(sentiment)
mode(sentiment_plotp$sentiment)
?summary_table
#time-series negative sentiment - bing
sentiment_plot <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
filter(sentiment == "negative") %>%
count(Year, MergeCountry, sentiment)
ggplot(sentiment_plot, aes(x=Year, y=n))+
geom_line(color="red")+
theme_minimal()+
ylab("Frequency of Negative Words in UN speeches")+
xlab("Year")
View(sentiment_plot)
sentiment_plotp <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
filter(sentiment == "positive") %>%
count(Year, MergeCountry, sentiment)
ggplot(sentiment_plotp, aes(x=as.numeric(Year), y=n))+
geom_line(color="blue")+
theme_minimal()+
ylab("Frequency of Positive Words in UN speeches")+
xlab("Year")
?ggplot
#time-series negative sentiment - bing
sentiment_plotn <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
filter(sentiment == "negative") %>%
count(Year, MergeCountry, sentiment)
sentiment_plot <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
count(Year, MergeCountry, sentiment)
View(sentiment_plot)
mytable <- table(sentiment_plot$Year, sentiment_plot$sentiment)
mytable
mytable <- table(sentiment_plot$Year, sentiment_plot$n)
mytable
mytable <- table(sentiment_plot$MergeCountry, sentiment_plot$sentiment)
mytable
mytable <- table(sentiment_plot$MergeCountry, sentiment_plot$sentiment, sentiment_plot$n)
mytable
mytable <- table(sentiment_plot$Year, sentiment_plot$sentiment, sentiment_plot$n)
mytable
mytable <- table (sentiment_plot$sentiment, sentiment_plot$n)
mytable
mytable <- table (sentiment_plot$n, sentiment_plot$sentiment)
mytable
sentiment_plot <- sentiment_plot %>%
group_by(MergeCountry, Year)
sentiment_plot
View(HHRR_counts)
sentiment_plot
sentiment_UNGD_bing <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
count(Year, MergeCountry, sentiment)
sentiment_plot
sentiment_UNGD_bing
count_UNGDsentiment_bing <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
count(Year, MergeCountry, sentiment)
count_UNGDsentiment_bing
count_UNGDsentiment_afinn <-
sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
count(Year, MergeCountry, sentiment)
afinn
#join dictionary
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
group_by(MergeCountry, Year) %>%
summarise(sentiment = sum(value)) %>%
mutate(method = "AFINN")
afinn
View(afinn)
#join dictionary
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
group_by(MergeCountry, Year) %>%
mutate(method = "AFINN")
afinn
#join dictionary
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
group_by(MergeCountry, Year) %>%
summarise(sentiment = sum(value)) %>%
mutate(method = "AFINN")
afinn
#join dictionary
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
group_by(MergeCountry, Year) %>%
summarise(sentiment = sum(score)) %>%
mutate(method = "AFINN")
ggplot(sentiment_plotn, aes(x=Year, y=n))+
geom_smooth(color="red")+
geom_point(color="blue")
ggplot(sentiment_plotn, aes(x=Year, y=n))+
geom_smooth(color="blue")+
geom_point(color="red")
ggplot(sentiment_plotp, aes(x=as.numeric(Year), y=n))+
geom_smooth(color="red")+
geom_point(color="blue")+
theme_minimal()+
ylab("Frequency of Positive Words in UN speeches")+
xlab("Year")
#join dictionary
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
group_by(MergeCountry, Year) %>%
summarise(sentiment = sum(score))
#join dictionary
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn"))
afinn
#join dictionary
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn"))
afinn
mutate(method = "AFINN")
afinn
summary(afinn)
summarise(score = sum(score) %>%
afinn
summary(afinn)
#join dictionary
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn"))
afinn
count(Year, MergeCountry, sentiment)
summarise(score = sum(score) %>%
count(Year, MergeCountry, sentiment)
summary(afinn)
summarise(score = sum(score)) %>%
mutate(method = "AFINN") %>%
count(Year, MergeCountry, sentiment)
summarise(sentiment = sum(score)) %>%
mutate(method = "AFINN") %>%
count(Year, MergeCountry, sentiment)
#join dictionary
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
mutate(method = "AFINN") %>%
count(Year, MergeCountry, sentiment)
nrc <- sent_words_lim %>%
inner_join(get_sentiments("nrc")) %>%
group_by(MergeCountry, Year) %>%
count (Year, MergeCountry, sentiment)
nrc
nrc <- sent_words_lim %>%
inner_join(get_sentiments("nrc")) %>%
group_by(MergeCountry, Year) %>%
count (Year, MergeCountry, sentiment) %>%
mutate(method = "nrc")
nrc
View(nrc)
count_UNGDsentiment_nrc <- sent_words_lim %>%
inner_join(get_sentiments("nrc")) %>%
group_by(MergeCountry, Year) %>%
count (Year, MergeCountry, sentiment) %>%
mutate(method = "nrc")
count_UNGDsentiment_nrc
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
group_by(MergeCountry, Year) %>%
count (Year, MergeCountry, sentiment) %>%
mutate(method = "AFINN")
##afinn
afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
group_by(MergeCountry, Year) %>%
count (Year, MergeCountry, value) %>%
mutate(method = "AFINN")
afinn
##afinn
count_UNGDsentiment_afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
group_by(MergeCountry, Year) %>%
count (Year, MergeCountry, value) %>%
mutate(method = "AFINN")
count_UNGDsentiment_afinn
HR_counts <- plyr::rename(HR_counts, c("human_rights_total"="HR"))
View(HHRR_counts)
head(merge_HRdict_counts)
head(merge_HRdict_counts)
View(HR_counts)
View(merge_HRdict_counts)
head(merge_HRdict_counts)
head(count_UNGDsentiment_afinn)
head(count_UNGDsentiment_bing)
head(count_UNGDsentiment_nrc)
merge_sentiment_counts1 <- merge(merge_HRdict_counts, count_UNGDsentiment_bing, by = c('MergeCountry','Year'), all=TRUE)
head(merge_sentiment_counts1)
head(count_UNGDsentiment_bing)
head(merge_sentiment_counts1)
colnames(count_UNGDsentiment_bing)[colnames(count_UNGDsentiment_bing)=="sentiment"] <- "sentiment_bing"
colnames(count_UNGDsentiment_bing)[colnames(count_UNGDsentiment_bing)=="n"] <- "n_bing"
head(count_UNGDsentiment_bing)
merge_sentiment_counts1 <- merge(merge_HRdict_counts, count_UNGDsentiment_bing, by = c('MergeCountry','Year'), all=TRUE)
head(merge_sentiment_counts1)
###merge afinn dictionary counts
head(count_UNGDsentiment_afinn)
colnames(count_UNGDsentiment_afinn)[colnames(count_UNGDsentiment_afinn)=="value"] <- "value_afinn"
colnames(count_UNGDsentiment_afinn)[colnames(count_UNGDsentiment_afinn)=="n"] <- "n_afinn"
colnames(count_UNGDsentiment_afinn)[colnames(count_UNGDsentiment_afinn)=="method"] <- "method_afinn"
###merge afinn dictionary counts
head(count_UNGDsentiment_afinn)
merge_sentiment_counts2 <- merge(merge_sentiment_counts1, count_UNGDsentiment_afinn, by = c('MergeCountry','Year'), all=TRUE)
head(merge_sentiment_counts2)
###merge nrc dictionary counts
head(count_UNGDsentiment_nrc)
colnames(count_UNGDsentiment_nrc)[colnames(count_UNGDsentiment_nrc)=="sentiment"] <- "sentiment_nrc"
colnames(count_UNGDsentiment_nrc)[colnames(count_UNGDsentiment_nrc)=="n"] <- "n_nrc"
colnames(count_UNGDsentiment_nrc)[colnames(count_UNGDsentiment_nrc)=="n"] <- "n_nrc"
colnames(count_UNGDsentiment_nrc)[colnames(count_UNGDsentiment_nrc)=="method"] <- "method_nrc"
###merge nrc dictionary counts
head(count_UNGDsentiment_nrc)
merge_sentiment_all <- merge(merge_sentiment_counts2, count_UNGDsentiment_nrc, by = c('MergeCountry','Year'), all=TRUE)
head(merge_sentiment_counts2)
?head
head(merge_sentiment_counts2, n = 20)
head(merge_sentiment_all, n = 20)
head(merge_sentiment_all, n = 30)
head(merge_sentiment_all, n = 40)
table(merge_sentiment_all$PTS_A_ch, merge_sentiment_all$PTS_A_var)
head(merge_sentiment_all$PTS_A_var)
summary(merge_sentiment_all$PTS_A_var)
summary(merge_sentiment_all$PTS_A_ch)
summary(merge_sentiment_all$PTS_A)
summary(merge_sentiment_all$PTS_A_dummy)
?table
?which
?ifelse
PTS_change <- subset(merge_sentiment_all, select = c(Year, MergeCountry, PTS_A, PTS_A_var==1))
head(PTS_change)
PTS_change <- subset(merge_HRdict_counts, select = c(Year, MergeCountry, PTS_A, PTS_A_var==1))
head(PTS_change)
PTS_change <- subset(merge_HRdict_counts, select = c(Year, MergeCountry, PTS_A, PTS_A_var, PTS_A_var==1))
head(PTS_change)
PTS_change
head(merge_sentiment_all)
head(merge_sentiment_counts1)
?lm
?subset
mode(merge_sentiment_all$sentiment_bing)
?lm
Modelbing_S <- lm (n_bing ~ PTS_S_dummy + PTS_S_var + PTS_S_dummy*PTS_S_var, data = merge_sentiment_all, subset(merge_sentiment_all, sentiment_bing = "negative"))
library(compareDF)
library(dplyr)
library(foreign)
library(ggplot2)
library(haven)
library(lmtest)
library(pander)
library(plm)
library(quanteda)
library(readtext)
library(readxl)
library(RColorBrewer)
library(rworldmap)
library(stargazer)
library(stringr)
library(syuzhet)
library(texreg)
library(tidyr)
library(zip)
library(tibble)
#install.packages("tidytext")
#install.packages("tidyverse")
library(tidytext)
library(tidyverse)
library(glue)
library(remotes)
install_github("EmilHvitfeldt/textdata")
install_github("juliasilge/tidytext")
#Upload UNGDC data
dir.create(temp <- tempfile())
urlungdc<-'https://dataverse.harvard.edu/api/access/datafile/:persistentId?persistentId=doi:10.7910/DVN/0TJX8Y/PZUURT'
download.file(urlungdc, paste0(temp, '/PZUURT.zip'), mode="wb",
exdir = temp)
View(ungd_files)
unzip(paste0(temp, '/PZUURT.zip'), exdir = temp)
sent_words <- clean_PTS_ungd1976 %>%
group_by(MergeCountry) %>%
ungroup() %>%
unnest_tokens(word, text)
head(sent_words)
sent_words_lim <- subset(sent_words, select = c(Year, MergeCountry, PTS_A, PTS_A_var, Session, word))
sent_words_lim
#find total number of words
wordstotal <- sent_words_lim %>%
count(MergeCountry)
wordstotal$total<-wordstotal$n
wordstotal<-wordstotal[,c("MergeCountry", "total")]
wordstotal
#find total number of words
wordstotal <- sent_words_lim %>%
count(MergeCountry, Year)
wordstotal$total<-wordstotal$n
wordstotal<-wordstotal[,c("MergeCountry", "Year", "total")]
wordstotal
#negative sentiment - bing
sentiment_plotn <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
filter(sentiment == "negative") %>%
count(Year, MergeCountry, sentiment)
ggplot(sentiment_plotn, aes(x=Year, y=n))+
geom_smooth(color="blue")+
geom_point(color="red")
theme_minimal()+
ylab("Frequency of Negative Words in UN speeches")+
xlab("Year")
ggplot(sentiment_plotn, aes(x=Year, y=n))+
geom_smooth(color="blue")+
geom_point(color="red")
theme_minimal()+
ylab("Frequency of Negative Words in UN speeches")+
xlab("Year")
ggplot(sentiment_plotn, aes(x=Year, y=n))+
geom_smooth(color="blue")+
geom_point(color="red")
theme_minimal()+
ylab("Frequency of Negative Words in UN speeches")+
xlab("Year")
ggplot(sentiment_plotn, aes(x=Year, y=n))+
geom_smooth(color="blue")+
geom_point(color="red")+
theme_minimal()+
ylab("Frequency of Negative Words in UN speeches")+
xlab("Year")
library(ggplot2)
ggplot(sentiment_plotn, aes(x=Year, y=n))+
geom_smooth(color="blue")+
geom_point(color="red")+
theme_minimal()+
ylab("Frequency of Negative Words in UN speeches")+
xlab("Year")
sentiment_plotp <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
filter(sentiment == "positive") %>%
count(Year, MergeCountry, sentiment)
ggplot(sentiment_plotp, aes(x=as.numeric(Year), y=n))+
geom_smooth(color="red")+
geom_point(color="blue")+
theme_minimal()+
ylab("Frequency of Positive Words in UN speeches")+
xlab("Year")
###no sentiment filter - bing
count_UNGDsentiment_bing <-
sent_words_lim %>%
inner_join(get_sentiments("bing")) %>%
count(Year, MergeCountry, sentiment)
count_UNGDsentiment_bing
##afinn
count_UNGDsentiment_afinn <- sent_words_lim %>%
inner_join(get_sentiments("afinn")) %>%
group_by(MergeCountry, Year) %>%
count (Year, MergeCountry, value) %>%
mutate(method = "AFINN")
count_UNGDsentiment_afinn
#count sentiment dictionary nrc
count_UNGDsentiment_nrc <- sent_words_lim %>%
inner_join(get_sentiments("nrc")) %>%
group_by(MergeCountry, Year) %>%
count (Year, MergeCountry, sentiment) %>%
mutate(method = "nrc")
count_UNGDsentiment_nrc
##bing
bing_ex <- sent_words_lim %>%
filter(MergeCountry == "USA") %>%
inner_join(get_sentiments("bing")) %>%
group_by(MergeCountry) %>%
mutate(method = "BING")
bing_ex
##nrc
nrc_anger <- get_sentiments("nrc") %>%
filter(sentiment == "anger")
sent_words_lim %>%
filter(MergeCountry == "USA") %>%
inner_join(nrc_anger) %>%
count(word, sort = TRUE)
head(merge_HRdict_counts)
colnames(count_UNGDsentiment_bing)[colnames(count_UNGDsentiment_bing)=="sentiment"] <- "sentiment_bing"
colnames(count_UNGDsentiment_bing)[colnames(count_UNGDsentiment_bing)=="n"] <- "n_bing"
head(count_UNGDsentiment_bing)
merge_sentiment_counts1 <- merge(merge_HRdict_counts, count_UNGDsentiment_bing, by = c('MergeCountry','Year'), all=TRUE)
head(merge_sentiment_counts1)
##afinn
head(count_UNGDsentiment_afinn)
colnames(count_UNGDsentiment_afinn)[colnames(count_UNGDsentiment_afinn)=="method"] <- "method_afinn"
colnames(count_UNGDsentiment_afinn)[colnames(count_UNGDsentiment_afinn)=="n"] <- "n_afinn"
colnames(count_UNGDsentiment_afinn)[colnames(count_UNGDsentiment_afinn)=="value"] <- "value_afinn"
##afinn
head(count_UNGDsentiment_afinn)
merge_sentiment_counts2 <- merge(merge_HRdict_counts1, count_UNGDsentiment_afinn, by = c('MergeCountry','Year'), all=TRUE)
merge_sentiment_counts2 <- merge(merge_sentiment_counts1, count_UNGDsentiment_afinn, by = c('MergeCountry','Year'), all=TRUE)
head(merge_sentiment_counts1)
merge_sentiment_counts1 <- merge(merge_HRdict_counts, count_UNGDsentiment_bing, by = c('MergeCountry','Year'), all=TRUE)
merge_sentiment_counts2 <- merge(merge_sentiment_counts1, count_UNGDsentiment_afinn, by = c('MergeCountry','Year'), all=TRUE)
head(merge_sentiment_counts2)
##nrc
head(count_UNGDsentiment_nrc)
colnames(count_UNGDsentiment_nrc)[colnames(count_UNGDsentiment_nrc)=="method"] <- "method_nrc"
##nrc
head(count_UNGDsentiment_nrc)
colnames(count_UNGDsentiment_nrc)[colnames(count_UNGDsentiment_nrc)=="n"] <- "n_nrc"
##nrc
head(count_UNGDsentiment_nrc)
colnames(count_UNGDsentiment_nrc)[colnames(count_UNGDsentiment_nrc)=="sentiment"] <- "sentiment_nrc"
##nrc
head(count_UNGDsentiment_nrc)
merge_sentiment_all <- merge(merge_sentiment_counts2, count_UNGDsentiment_nrc, by = c('MergeCountry','Year'), all=TRUE)
merge_sentiment_all <- merge(merge_sentiment_counts2, count_UNGDsentiment_nrc, by = c('MergeCountry','Year'), all=TRUE)
head(merge_sentiment_coun
head(merge_sentiment_all)
merge_sentiment_all <- merge(merge_sentiment_counts2, count_UNGDsentiment_nrc, by = c('MergeCountry','Year'), all=TRUE)
head(merge_sentiment_all)
head(merge_sentiment_all)
head(merge_sentiment_counts1)
